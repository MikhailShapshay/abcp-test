### Тестовое задание для разработчика на PHP
Мы ожидаем, что Вы:
* найдете и исправите все возможные ошибки (синтаксические, проектирования, безопасности и т.д.);
* отрефакторите код файла `ReturnOperation.php` в лучший по вашему мнению вид;
* напишите в комментарии краткое резюме по коду: назначение кода и его качество.

### Проблемы и улучшения
<ol>
<li>
<h4>Синтаксические ошибки:</h4> 
<ul>
<li>В коде исправлены синтаксические ошибки.</li>
</ul>
</li>
<li>
<h4>Проектирование:</h4> 
<ul>
<li>Изменена архитектура проекта</li>
<li>Логика обработки уведомлений находится в одном методе, что затрудняет чтение и поддержку.</li>
<li>Использование исключений для контроля потока программы может затруднить отладку.</li>
<li>Прямой доступ к глобальному массиву $_REQUEST снижает тестируемость и безопасность кода.</li>
</ul>
</li>
<li>
<h4>Безопасность:</h4>
<ul>
<li>Отсутствует валидация данных из запроса, что может привести к уязвимостям, таким как SQL-инъекции.</li>
<li>Код использует throw new \Exception для всех типов ошибок, что затрудняет их различие и обработку.</li>
</ul>
</li>
<li>
<h4>Рефакторинг:</h4> 
<ul>
<li>Вынести часть логики в отдельные методы для улучшения читаемости и поддержки.</li>
<li>Добавить проверки и валидацию входных данных.</li>
<li>Использовать более специфичные классы исключений для различения типов ошибок.</li>
</ul>
</li>
</ol>

### Объяснение изменений
<ol>
<li><b>Валидация данных:</b> Вынесена в отдельный метод <b>'validateData'</b></li>
<li><b>Проверка сущностей:</b> Вынесена в отдельный метод <b>'checkEntityExistence'</b></li>
<li><b>Подготовка шаблона данных:</b> Вынесена в отдельный метод <b>'prepareTemplateData'</b></li>
<li><b>Отправка уведомлений:</b> Вынесена в отдельный метод <b>'sendNotifications'</b></li>
<li><b>Использование более специфичных исключений:</b> Использованы <b>'\InvalidArgumentException'</b> и <b>'\RuntimeException'</b> для различения ошибок.</li>
<li><b>Улучшение читаемости и поддержки:</b> Код разбит на более мелкие методы, что делает его более читабельным и поддерживаемым.</li>
</ol>